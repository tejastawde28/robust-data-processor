<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 700">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00D9FF"/>
    </marker>
    <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#FF9900"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00FF88"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="700" fill="#1a1a2e"/>
  
  <!-- Title -->
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="#ffffff" text-anchor="middle">Data Flow - JSON &amp; Text Requests</text>
  
  <!-- Timeline Header -->
  <text x="100" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#888888">COMPONENT</text>
  <text x="250" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#888888">CLIENT</text>
  <text x="420" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#888888">API LAMBDA</text>
  <text x="620" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#888888">SQS</text>
  <text x="780" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#888888">WORKER</text>
  <text x="980" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#888888">DYNAMODB</text>
  
  <!-- Vertical Lines (Lifelines) -->
  <line x1="270" y1="110" x2="270" y2="650" stroke="#444444" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="450" y1="110" x2="450" y2="650" stroke="#FF9900" stroke-width="2"/>
  <line x1="640" y1="110" x2="640" y2="650" stroke="#FF4F8B" stroke-width="2"/>
  <line x1="820" y1="110" x2="820" y2="650" stroke="#FF9900" stroke-width="2"/>
  <line x1="1020" y1="110" x2="1020" y2="650" stroke="#3B48CC" stroke-width="2"/>
  
  <!-- JSON Request Section -->
  <rect x="30" y="120" width="120" height="25" rx="3" fill="#00D9FF"/>
  <text x="90" y="138" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#000000" text-anchor="middle">JSON REQUEST</text>
  
  <!-- Step 1: Client sends JSON -->
  <text x="50" y="170" font-family="Arial, sans-serif" font-size="11" fill="#888888">t=0ms</text>
  <line x1="270" y1="170" x2="440" y2="170" stroke="#00D9FF" stroke-width="2" marker-end="url(#arrowhead)"/>
  <rect x="290" y="155" width="130" height="30" rx="3" fill="#2a2a3e" stroke="#00D9FF"/>
  <text x="355" y="175" font-family="Arial, sans-serif" font-size="10" fill="#00D9FF" text-anchor="middle">POST /ingest</text>
  
  <!-- JSON Payload Box -->
  <rect x="150" y="185" width="180" height="70" rx="5" fill="#1e3a5f" stroke="#00D9FF"/>
  <text x="240" y="205" font-family="Arial, sans-serif" font-size="10" fill="#00D9FF" text-anchor="middle">Content-Type: application/json</text>
  <text x="240" y="222" font-family="Monaco, monospace" font-size="9" fill="#ffffff" text-anchor="middle">{"tenant_id": "acme_corp",</text>
  <text x="240" y="236" font-family="Monaco, monospace" font-size="9" fill="#ffffff" text-anchor="middle">"log_id": "001",</text>
  <text x="240" y="250" font-family="Monaco, monospace" font-size="9" fill="#ffffff" text-anchor="middle">"text": "User 555-0199..."}</text>
  
  <!-- Step 2: API Validates -->
  <text x="50" y="280" font-family="Arial, sans-serif" font-size="11" fill="#888888">t=5ms</text>
  <rect x="400" y="270" width="100" height="40" rx="5" fill="#FF9900" filter="url(#shadow)"/>
  <text x="450" y="285" font-family="Arial, sans-serif" font-size="9" fill="#000000" text-anchor="middle">Validate</text>
  <text x="450" y="300" font-family="Arial, sans-serif" font-size="9" fill="#000000" text-anchor="middle">Normalize</text>
  
  <!-- Step 3: API sends to SQS -->
  <text x="50" y="340" font-family="Arial, sans-serif" font-size="11" fill="#888888">t=10ms</text>
  <line x1="460" y1="340" x2="630" y2="340" stroke="#FF9900" stroke-width="2" marker-end="url(#arrowOrange)"/>
  <text x="545" y="330" font-family="Arial, sans-serif" font-size="9" fill="#888888" text-anchor="middle">Queue Message</text>
  
  <!-- Step 4: 202 Response -->
  <text x="50" y="380" font-family="Arial, sans-serif" font-size="11" fill="#00FF88">t=15ms</text>
  <line x1="440" y1="380" x2="280" y2="380" stroke="#00FF88" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <rect x="300" y="365" width="120" height="30" rx="3" fill="#004d00" stroke="#00FF88"/>
  <text x="360" y="385" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#00FF88" text-anchor="middle">202 Accepted</text>
  
  <!-- Async Boundary -->
  <line x1="30" y1="420" x2="1170" y2="420" stroke="#FF9900" stroke-width="1" stroke-dasharray="10,5"/>
  <rect x="520" y="408" width="160" height="24" rx="3" fill="#1a1a2e"/>
  <text x="600" y="425" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#FF9900" text-anchor="middle">ASYNC BOUNDARY</text>
  
  <!-- Step 5: SQS triggers Worker -->
  <text x="50" y="470" font-family="Arial, sans-serif" font-size="11" fill="#888888">t=50ms</text>
  <line x1="650" y1="470" x2="810" y2="470" stroke="#FF4F8B" stroke-width="2" marker-end="url(#arrowOrange)"/>
  <text x="730" y="460" font-family="Arial, sans-serif" font-size="9" fill="#888888" text-anchor="middle">Trigger</text>
  
  <!-- Step 6: Worker Processing -->
  <text x="50" y="520" font-family="Arial, sans-serif" font-size="11" fill="#888888">t=1-5s</text>
  <rect x="770" y="490" width="100" height="70" rx="5" fill="#FF9900" filter="url(#shadow)"/>
  <text x="820" y="510" font-family="Arial, sans-serif" font-size="9" fill="#000000" text-anchor="middle">Sleep</text>
  <text x="820" y="525" font-family="Arial, sans-serif" font-size="9" fill="#000000" text-anchor="middle">(0.05s/char)</text>
  <text x="820" y="545" font-family="Arial, sans-serif" font-size="9" fill="#000000" text-anchor="middle">Redact PII</text>
  
  <!-- Step 7: Save to DynamoDB -->
  <text x="50" y="590" font-family="Arial, sans-serif" font-size="11" fill="#888888">t=5.1s</text>
  <line x1="830" y1="590" x2="1010" y2="590" stroke="#FF9900" stroke-width="2" marker-end="url(#arrowOrange)"/>
  <text x="920" y="580" font-family="Arial, sans-serif" font-size="9" fill="#888888" text-anchor="middle">PutItem</text>
  
  <!-- DynamoDB Result Box -->
  <rect x="920" y="600" width="180" height="70" rx="5" fill="#1e1e5f" stroke="#3B48CC"/>
  <text x="1010" y="620" font-family="Arial, sans-serif" font-size="10" fill="#3B48CC" text-anchor="middle">Stored Document:</text>
  <text x="1010" y="638" font-family="Monaco, monospace" font-size="8" fill="#ffffff" text-anchor="middle">tenant_id: "acme_corp"</text>
  <text x="1010" y="652" font-family="Monaco, monospace" font-size="8" fill="#ffffff" text-anchor="middle">modified_data:</text>
  <text x="1010" y="666" font-family="Monaco, monospace" font-size="8" fill="#00FF88" text-anchor="middle">"User [REDACTED]..."</text>
  
  <!-- Step 8: Delete from SQS -->
  <text x="50" y="640" font-family="Arial, sans-serif" font-size="11" fill="#888888">t=5.2s</text>
  <line x1="810" y1="640" x2="650" y2="640" stroke="#00FF88" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="730" y="655" font-family="Arial, sans-serif" font-size="9" fill="#00FF88" text-anchor="middle">Delete (ACK)</text>
  

</svg>
