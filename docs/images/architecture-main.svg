<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    <linearGradient id="lambdaGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF9900;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FF6600;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="sqsGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF4F8B;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#CC3366;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dynamoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B48CC;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2D3AB8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="clientGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#00D9FF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00A8CC;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="#1a1a2e"/>
  
  <!-- Title -->
  <text x="600" y="45" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#ffffff" text-anchor="middle">Robust Data Processor - Architecture</text>
  
  <!-- Clients Box -->
  <rect x="50" y="80" width="200" height="160" rx="10" fill="url(#clientGrad)" filter="url(#shadow)"/>
  <text x="150" y="115" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">CLIENTS</text>
  
  <!-- JSON section -->
  <text x="150" y="140" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#ffffff" text-anchor="middle">JSON:</text>
  <text x="150" y="155" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">Content-Type: application/json</text>
  
  <!-- Divider line -->
  <line x1="70" y1="170" x2="230" y2="170" stroke="#ffffff" stroke-opacity="0.5" stroke-width="1"/>
  
  <!-- Text section -->
  <text x="150" y="190" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#ffffff" text-anchor="middle">TEXT:</text>
  <text x="150" y="205" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">Content-Type: text/plain</text>
  <text x="150" y="220" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">X-Tenant-ID: header</text>
  
  <!-- Arrow: Clients to API -->
  <line x1="250" y1="160" x2="350" y2="160" stroke="#00D9FF" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="300" y="145" font-family="Arial, sans-serif" font-size="11" fill="#888888" text-anchor="middle">POST /ingest</text>
  
  <!-- API Lambda Box -->
  <rect x="360" y="80" width="240" height="160" rx="10" fill="url(#lambdaGrad)" filter="url(#shadow)"/>
  <text x="480" y="110" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">API LAMBDA</text>
  <text x="480" y="135" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">Flask Application</text>
  <line x1="380" y1="150" x2="580" y2="150" stroke="#ffffff" stroke-opacity="0.3"/>
  <text x="480" y="170" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">✓ Validate Content-Type</text>
  <text x="480" y="188" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">✓ Extract tenant_id</text>
  <text x="480" y="206" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">✓ Normalize payload</text>
  <text x="480" y="224" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">✓ Queue to SQS</text>
  
  <!-- 202 Response Arrow -->
  <line x1="360" y1="200" x2="250" y2="200" stroke="#00FF88" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="305" y="218" font-family="Arial, sans-serif" font-size="10" fill="#00FF88" text-anchor="middle">202 Accepted</text>
  <text x="305" y="232" font-family="Arial, sans-serif" font-size="9" fill="#888888" text-anchor="middle">(instant ~60ms)</text>
  
  <!-- Arrow: API to SQS -->
  <line x1="600" y1="160" x2="700" y2="160" stroke="#FF9900" stroke-width="3"/>
  <text x="650" y="145" font-family="Arial, sans-serif" font-size="10" fill="#888888" text-anchor="middle">async</text>
  
  <!-- SQS Queue Box -->
  <rect x="710" y="80" width="200" height="160" rx="10" fill="url(#sqsGrad)" filter="url(#shadow)"/>
  <text x="810" y="110" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">SQS QUEUE</text>
  <line x1="730" y1="125" x2="890" y2="125" stroke="#ffffff" stroke-opacity="0.3"/>
  <text x="810" y="148" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">Visibility: 15 min</text>
  <text x="810" y="168" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">Retention: 14 days</text>
  <text x="810" y="188" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">Max Retries: 3</text>
  <text x="810" y="218" font-family="Arial, sans-serif" font-size="10" fill="#ffcccc" text-anchor="middle">→ DLQ on failure</text>
  
  <!-- Arrow: SQS to Worker -->
  <line x1="810" y1="240" x2="810" y2="320" stroke="#FF4F8B" stroke-width="3"/>
  <text x="830" y="285" font-family="Arial, sans-serif" font-size="10" fill="#888888">trigger</text>
  
  <!-- Worker Lambda Box -->
  <rect x="660" y="330" width="300" height="180" rx="10" fill="url(#lambdaGrad)" filter="url(#shadow)"/>
  <text x="810" y="360" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">WORKER LAMBDA</text>
  <line x1="680" y1="375" x2="940" y2="375" stroke="#ffffff" stroke-opacity="0.3"/>
  <text x="810" y="400" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">1. Parse SQS message</text>
  <text x="810" y="422" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">2. Simulate processing (0.05s/char)</text>
  <text x="810" y="444" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">3. Redact sensitive data</text>
  <text x="810" y="466" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">   555-0199 → [REDACTED]</text>
  <text x="810" y="488" font-family="Arial, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle">4. Save to DynamoDB</text>
  
  <!-- Arrow: Worker to DynamoDB -->
  <line x1="810" y1="510" x2="810" y2="580" stroke="#FF9900" stroke-width="3"/>
  
  <!-- DynamoDB Box -->
  <rect x="560" y="590" width="500" height="180" rx="10" fill="url(#dynamoGrad)" filter="url(#shadow)"/>
  <text x="810" y="620" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">DYNAMODB - Multi-Tenant Storage</text>
  <text x="810" y="642" font-family="Arial, sans-serif" font-size="11" fill="#cccccc" text-anchor="middle">Partition Key: tenant_id | Sort Key: log_id</text>
  <line x1="580" y1="655" x2="1040" y2="655" stroke="#ffffff" stroke-opacity="0.3"/>
  
  <!-- Tenant Boxes inside DynamoDB -->
  <rect x="590" y="670" width="130" height="80" rx="5" fill="#4a5568" stroke="#00FF88" stroke-width="2"/>
  <text x="655" y="695" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#00FF88" text-anchor="middle">acme_corp</text>
  <text x="655" y="715" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">log-001</text>
  <text x="655" y="730" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">log-002</text>
  
  <rect x="740" y="670" width="130" height="80" rx="5" fill="#4a5568" stroke="#FF9900" stroke-width="2"/>
  <text x="805" y="695" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#FF9900" text-anchor="middle">beta_inc</text>
  <text x="805" y="715" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">log-001</text>
  <text x="805" y="730" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">log-002</text>
  
  <rect x="890" y="670" width="130" height="80" rx="5" fill="#4a5568" stroke="#00D9FF" stroke-width="2"/>
  <text x="955" y="695" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#00D9FF" text-anchor="middle">gamma_llc</text>
  <text x="955" y="715" font-family="Arial, sans-serif" font-size="10" fill="#ffffff" text-anchor="middle">log-001</text>
  
  <!-- Isolation Labels -->
  <text x="655" y="762" font-family="Arial, sans-serif" font-size="9" fill="#00FF88" text-anchor="middle">ISOLATED</text>
  <text x="805" y="762" font-family="Arial, sans-serif" font-size="9" fill="#FF9900" text-anchor="middle">ISOLATED</text>
  <text x="955" y="762" font-family="Arial, sans-serif" font-size="9" fill="#00D9FF" text-anchor="middle">ISOLATED</text>
  
  <!-- DLQ Box -->
  <rect x="980" y="100" width="170" height="100" rx="10" fill="#4a1a1a" stroke="#ff4444" stroke-width="2" filter="url(#shadow)"/>
  <text x="1065" y="130" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ff4444" text-anchor="middle">DEAD LETTER</text>
  <text x="1065" y="148" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ff4444" text-anchor="middle">QUEUE</text>
  <text x="1065" y="175" font-family="Arial, sans-serif" font-size="10" fill="#ffcccc" text-anchor="middle">Failed messages</text>
  <text x="1065" y="190" font-family="Arial, sans-serif" font-size="10" fill="#ffcccc" text-anchor="middle">for inspection</text>
  
  <!-- Arrow: SQS to DLQ -->
  <line x1="910" y1="140" x2="980" y2="140" stroke="#ff4444" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="945" y="130" font-family="Arial, sans-serif" font-size="9" fill="#ff4444" text-anchor="middle">3 fails</text>
  
  <!-- Legend -->
  <rect x="50" y="700" width="180" height="80" rx="5" fill="#2a2a3e" stroke="#444" stroke-width="1"/>
  <text x="140" y="720" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#ffffff" text-anchor="middle">LEGEND</text>
  <line x1="70" y1="735" x2="100" y2="735" stroke="#00FF88" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="110" y="739" font-family="Arial, sans-serif" font-size="10" fill="#888888">Response</text>
  <line x1="70" y1="755" x2="100" y2="755" stroke="#FF9900" stroke-width="2"/>
  <text x="110" y="759" font-family="Arial, sans-serif" font-size="10" fill="#888888">Async Flow</text>
  <line x1="70" y1="775" x2="100" y2="775" stroke="#ff4444" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="110" y="779" font-family="Arial, sans-serif" font-size="10" fill="#888888">Failure Path</text>
</svg>
